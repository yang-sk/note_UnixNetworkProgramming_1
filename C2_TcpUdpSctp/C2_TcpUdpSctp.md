## 第二章 传输层：TCP、UDP、STCP

概览：各个应用使用的协议层次关系

![各个应用的协议层次](https://github.com/yang-sk/note_unix_network_program_1/blob/master/C2_TcpUdpSctp/img/App_TCP_IP.png?raw=true)

- 以上未表示SOCK_PACKET绕过传输层的情况
- ICMP 处理路由和主机间的错误和控制消息
- IGMP 用于多播
- ARP把IP地址解析为硬件地址，RARP则反向解析
- IGMPv6包含了ICMP、IGMP、ARP、RARP的功能
- BPF和DLPI提高对数据链路的直接访问

### 特性对比

#### UDP特点
- 无连接、不可靠
- 不保证到达，不保证保持顺序，不保证只接收一次
- 消息有界，数据长度值随报文发送

#### TCP特点
1. 可靠性  
  - 发送后要求对方确认，如超时未收到，则自动重传数次。通过动态估计往返时间(round-trip time,RTT)以确定时限，再次重传时，时限会有所延长，整个过程可能花费数分钟。
  - 关联序号。对发出的每个分节关联一个序号，便于对方接收后重排，保证顺序不变，且无重复。
2. 流量控制  
告知对方，本端当前的接收容量（通告窗口）的大小，以便于对方进行调整。这个数值会实时变动。当通告窗口为零时，代表本端不能接收新数据，需要对方等待。
3. 全双工  
发送和接收两个方向保持独立。亦可转换为半双工。  
> UDP可以是全双工的。  

#### SCTP特点
- 关联：多个连接，提供类似TCP的可靠性、关联序号、流量控制和全双工等特性。
- 面向消息，有界。数据长度随报文发送。
- 多个流，各自独立
- 提供多宿特性，支持多个IP地址

### TCP

#### 三次握手


























